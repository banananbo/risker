# laravel5.5 README

## 概要
このリポジトリはlaravel5.5とphpunitを使用してTDDの課題を実際にやってみることで、  
TDDとはなにかを体感してもらうためのものです。  
※TDDとはtest-driven developmentの略でテスト駆動開発の意味

## 必要なもの
* php7以上
* composer 

## 対象者
* ユニットテストをやったことがない人
* TDDをやったことがない人

## 所要時間
* 8時間程度

## ディレクトリ構成
https://readouble.com/laravel/5.5/ja/structure.html  
※app/Serviceディレクトリはこちらで作成しました。

## cloneしてからやること
```
$ composer install
$ php -r "file_exists('.env') || copy('.env.example', '.env');"
$ php artisan key:generate

// phpunitがあることを確認する
// バージョンが6.3であればOK
$ ./vendor/bin/phpunit --version
```

## TDDを始める前に見ておいてほしい参考リンク
* [laravelのテストのページ](https://readouble.com/laravel/5.5/ja/testing.html)
* [phpunitのマニュアル](https://phpunit.de/manual/6.3/ja/index.html)
* [TDD講座](http://gihyo.jp/dev/serial/01/tdd)
* [TDDアンチパターン](http://www.hyuki.com/yukiwiki/wiki.cgi?TddAntiPatterns)
* [php7で堅牢なコードを書く](https://www.youtube.com/watch?v=54jHDHvcYAo)

## 課題
* 前提として、TDD講座でもあったようにまずはテストから書いてください。
Red→Green→リファクタリングの流れを守るようにしてください。

* 初級編1-1
  * 1から100までの値を評価してその数が3の倍数だった時に「fizz」と返し、
5の倍数だったときは「buzz」と返し、両方に当てはまる場合は「fizzbuzz」と返し、
上記全てに当てはまらない場合は値をそのまま返すクラスを作成してください。
※app/もしくはservice/配下にテスト対象クラスを作ってください。
* 初級編1-2
  * 上記で作成したものを使って今度は1から100以外の数(x < 1 || 100 < x)の場合は
「1から100までが有効です。」というメッセージを返すようにしてください。
  * 上記で作成したものを使って今度は数字以外の場合は
「数字を入れてください。」というメッセージを返すようにしてください。

* 上級編1-1
  * 自動販売機クラスを作成してもらいます。下記の仕様をみたすように作成してください。
    * 10円玉、50円玉、100円玉、500円玉、1000円札を１つずつ投入できる。
    * 投入は複数回できる。
    * 投入金額の総計を取得できる。
    * 払い戻し操作を行うと、投入金額の総計を釣り銭として出力する。
* 上級編1-2
  * 下記の仕様追加に対応してください。
    * 想定外のもの（硬貨：１円玉、５円玉。お札：千円札以外のお札）が投入された場合は、投入金額に加算せず、それをそのまま釣り銭としてユーザに出力する。
* 上級編1-3(責務を持ちすぎていませんか？責任を持ちすぎていたら分割しましょう)
  * 下記の仕様追加に対応してください。
    * 値段と名前の属性からなるジュースを１種類格納できる。初期状態で、コーラ（値段:120円、名前”コーラ”）を5本格納している。
    * 格納されているジュースの情報（値段と名前と在庫）を取得できる。
* 上級編1-4(責務を持ちすぎていませんか？責任を持ちすぎていたら分割しましょう)
  * 下記の仕様追加に対応してください。
    * 投入金額、在庫の点で、コーラが購入できるかどうかを取得できる。
    * ジュース値段以上の投入金額が投入されている条件下で購入操作を行うと、ジュースの在庫を減らし、売り上げ金額を増やす。
    * 投入金額が足りない場合もしくは在庫がない場合、購入操作を行っても何もしない。
    * 現在の売上金額を取得できる。
    * 払い戻し操作では現在の投入金額からジュース購入金額を引いた釣り銭を出力する。
* 上級編1-5
  * 下記の仕様追加に対応してください。
    * ジュースを3種類管理できるようにする。
      * 在庫にレッドブル（値段:200円、名前”レッドブル”）5本を追加する。
      * 在庫に水（値段:100円、名前”水”）5本を追加する。
    * 投入金額、在庫の点で購入可能なドリンクのリストを取得できる。
* 上級編1-6
  * 下記の仕様追加に対応してください。
    * ジュース値段以上の投入金額が投入されている条件下で購入操作を行うと、釣り銭（投入金額とジュース値段の差分）を出力する。
      * ジュースと投入金額が同じ場合、つまり、釣り銭0円の場合も、釣り銭0円と出力する。
      * 釣り銭の硬貨の種類は考慮しなくてよい。
